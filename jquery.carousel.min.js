(function (c, b, a, e) { var d = function (g, f) { this.element = g; this.defaults = { imgArray: [], height: "150px", time: 2000 }; this.options = c.extend({}, this.defaults, f) }; d.prototype.setCarousel = function () { var f = c(b).width(); c(b).resize(function () { location.reload() }); var h = this.options.imgArray; var g = h.length + 2; var r = '<ul class="ul-img">'; var k = strLast = strItem = ""; c.each(h, function (s, t) { strItem = '<li><a href="#"><img src="' + t + '" /></a></li>'; s == 0 ? k += strItem : k += ""; s == h.length - 1 ? strLast += strItem : strLast += ""; r += strItem }); r += "</ul>"; this.element.append(r); var p = '<ul class="ul-point">'; for (var j = 0; j < h.length; j++) { p += "<li></li>" } p += "</ul>"; this.element.append(p); c(".ul-img li:first-child").before(strLast); c(".ul-img li:last-child").after(k); var n = c(".ul-img"); var q = c(".ul-point"); n.css("width", (g * f) + "px"); c(".ul-img li a img").css({ "width": f + "px", "height": this.options.height }); q.css("margin-left", -q.width() / 2 + "px"); function o() { n.animate({ "marginLeft": (-m * f) + "px" }, function () { if (m >= g - 1) { m = 1; n.css("margin-left", (-m * f) + "px") } c(".ul-point li").eq(m - 1).css("background-color", "white").siblings().css("background-color", "transparent") }) } var m = 1; var l = setInterval(function () { m++; o() }, this.options.time); return this }; d.prototype.init = function () { this.setCarousel() }; c.fn.carousel = function (f) { var g = new d(this, f); return g.init() } })(jQuery, window, document);